<script type='text/template' id='variant_autocomplete_stock_template'>
  <fieldset>
    <legend align="center"><%= Spree.t(:select_stock) %></legend>
    <table class="stock-levels" data-hook="stock-levels">
      <colgroup>
        <col style="width: 30%;" />
        <col style="width: 40%;" />
        <col style="width: 20%;" />
        <col style="width: 10%;" />
      </colgroup>
      <thead>
        <th><%= Spree.t(:from_location) %></th>
        <th><%= Spree.t(:count_on_hand) %></th>
        <th><%= Spree.t(:quantity) %></th>
        <th class="actions"></th>
      </thead>
      <tbody>
        <%% _.each(variant.get('stock_items'), function(item) { %>
          <tr class='stock-item' data-stock-location-id='<%%= item.stock_location_id %>'>
            <td><%%= item.stock_location_name %></td>

            <%% if (variant.get('track_inventory') == false) { %>
              <td>
                <%= Spree.t(:no_inventory_tracked) %>
              </td>
              <td>
                <input class="quantity" id="stock_item_quantity" type="number" min="1" value="1">
              </td>
              <td class="actions">
                <button class="add_variant no-text icon-plus icon_link with-tip" title="<%= Spree.t(:add) %>"></button>
              </td>
            <%% } else { %>
              <%% if (item.available) { %>
                <td>
                  <%%= item.count_on_hand %>
                  <%% if (this.backorderable) { %><%%= Spree.translations.backorders_allowed %><%% } %>
                </td>
                <td>
                  <input class="quantity" id="stock_item_quantity" type="number" min="1" value="1">
                </td>
                <td class="actions">
                  <button class="add_variant no-text icon-plus icon_link with-tip" title="<%= Spree.t(:add) %>"></button>
                </td>
              <%% } else { %>
                <td><%= Spree.t(:out_of_stock) %></td>
                <td>0</td>
              <%% } %>
            <%% } %>
          </tr>
        <%% }) %>
      </tbody>
    </table>
  </fieldset>
</script>
